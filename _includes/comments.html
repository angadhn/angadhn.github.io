<div class="page__comments">
  {% capture comments_label %}{{ site.data.ui-text[site.locale].comments_label | default: "Comments" }}{% endcapture %}
  {% case site.comments.provider %}
    {% when "bluesky" %}
      <h4 class="page__comments-title">{{ comments_label }}</h4>
      <section class="bluesky-comments-section">
        <div id="bluesky-comments"></div>
      </section>
    {% when "disqus" %}
      <h4 class="page__comments-title">{{ comments_label }}</h4>
      <section id="disqus_thread"></section>
  {% endcase %}
</div>

<!-- Add Bluesky scripts at the bottom -->
{% if site.comments.provider == "bluesky" %}
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/bluesky-comments@latest/dist/bluesky-comments.umd.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      if (document.getElementById('bluesky-comments')) {
        initBlueskyComments('bluesky-comments', { author: 'angadhn.com' });
      }
    });
  </script>
{% endif %}
